{"ast":null,"code":"!function (r, e) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define([], e) : \"object\" == typeof exports ? exports.freighterApi = e() : r.freighterApi = e();\n}(this, () => (() => {\n  \"use strict\";\n\n  var r,\n    e,\n    s = {\n      d: (r, e) => {\n        for (var t in e) s.o(e, t) && !s.o(r, t) && Object.defineProperty(r, t, {\n          enumerable: !0,\n          get: e[t]\n        });\n      },\n      o: (r, e) => Object.prototype.hasOwnProperty.call(r, e),\n      r: r => {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(r, Symbol.toStringTag, {\n          value: \"Module\"\n        }), Object.defineProperty(r, \"__esModule\", {\n          value: !0\n        });\n      }\n    },\n    t = {};\n  s.r(t), s.d(t, {\n    WatchWalletChanges: () => u,\n    addToken: () => S,\n    default: () => D,\n    getAddress: () => i,\n    getNetwork: () => C,\n    getNetworkDetails: () => O,\n    isAllowed: () => I,\n    isBrowser: () => U,\n    isConnected: () => c,\n    requestAccess: () => w,\n    setAllowed: () => R,\n    signAuthEntry: () => N,\n    signMessage: () => l,\n    signTransaction: () => d\n  }), function (r) {\n    r.CREATE_ACCOUNT = \"CREATE_ACCOUNT\", r.FUND_ACCOUNT = \"FUND_ACCOUNT\", r.ADD_ACCOUNT = \"ADD_ACCOUNT\", r.IMPORT_ACCOUNT = \"IMPORT_ACCOUNT\", r.IMPORT_HARDWARE_WALLET = \"IMPORT_HARDWARE_WALLET\", r.LOAD_ACCOUNT = \"LOAD_ACCOUNT\", r.MAKE_ACCOUNT_ACTIVE = \"MAKE_ACCOUNT_ACTIVE\", r.UPDATE_ACCOUNT_NAME = \"UPDATE_ACCOUNT_NAME\", r.GET_MNEMONIC_PHRASE = \"GET_MNEMONIC_PHRASE\", r.CONFIRM_MNEMONIC_PHRASE = \"CONFIRM_MNEMONIC_PHRASE\", r.CONFIRM_MIGRATED_MNEMONIC_PHRASE = \"CONFIRM_MIGRATED_MNEMONIC_PHRASE\", r.RECOVER_ACCOUNT = \"RECOVER_ACCOUNT\", r.CONFIRM_PASSWORD = \"CONFIRM_PASSWORD\", r.REJECT_ACCESS = \"REJECT_ACCESS\", r.GRANT_ACCESS = \"GRANT_ACCESS\", r.ADD_TOKEN = \"ADD_TOKEN\", r.SIGN_TRANSACTION = \"SIGN_TRANSACTION\", r.SIGN_BLOB = \"SIGN_BLOB\", r.SIGN_AUTH_ENTRY = \"SIGN_AUTH_ENTRY\", r.HANDLE_SIGNED_HW_PAYLOAD = \"HANDLE_SIGNED_HW_PAYLOAD\", r.REJECT_TRANSACTION = \"REJECT_TRANSACTION\", r.SIGN_FREIGHTER_TRANSACTION = \"SIGN_FREIGHTER_TRANSACTION\", r.SIGN_FREIGHTER_SOROBAN_TRANSACTION = \"SIGN_FREIGHTER_SOROBAN_TRANSACTION\", r.ADD_RECENT_ADDRESS = \"ADD_RECENT_ADDRESS\", r.LOAD_RECENT_ADDRESSES = \"LOAD_RECENT_ADDRESSES\", r.LOAD_LAST_USED_ACCOUNT = \"LOAD_LAST_USED_ACCOUNT\", r.SIGN_OUT = \"SIGN_OUT\", r.SHOW_BACKUP_PHRASE = \"SHOW_BACKUP_PHRASE\", r.SAVE_ALLOWLIST = \"SAVE_ALLOWLIST\", r.SAVE_SETTINGS = \"SAVE_SETTINGS\", r.SAVE_EXPERIMENTAL_FEATURES = \"SAVE_EXPERIMENTAL_FEATURES\", r.LOAD_SETTINGS = \"LOAD_SETTINGS\", r.LOAD_BACKEND_SETTINGS = \"LOAD_BACKEND_SETTINGS\", r.GET_CACHED_ASSET_ICON_LIST = \"GET_CACHED_ASSET_ICON_LIST\", r.GET_CACHED_ASSET_ICON = \"GET_CACHED_ASSET_ICON\", r.CACHE_ASSET_ICON = \"CACHE_ASSET_ICON\", r.GET_CACHED_ASSET_DOMAIN = \"GET_CACHED_ASSET_DOMAIN\", r.CACHE_ASSET_DOMAIN = \"CACHE_ASSET_DOMAIN\", r.GET_MEMO_REQUIRED_ACCOUNTS = \"GET_MEMO_REQUIRED_ACCOUNTS\", r.ADD_CUSTOM_NETWORK = \"ADD_CUSTOM_NETWORK\", r.CHANGE_NETWORK = \"CHANGE_NETWORK\", r.REMOVE_CUSTOM_NETWORK = \"REMOVE_CUSTOM_NETWORK\", r.EDIT_CUSTOM_NETWORK = \"EDIT_CUSTOM_NETWORK\", r.RESET_EXP_DATA = \"RESET_EXP_DATA\", r.ADD_TOKEN_ID = \"ADD_TOKEN_ID\", r.GET_TOKEN_IDS = \"GET_TOKEN_IDS\", r.REMOVE_TOKEN_ID = \"REMOVE_TOKEN_ID\", r.GET_MIGRATABLE_ACCOUNTS = \"GET_MIGRATABLE_ACCOUNTS\", r.GET_MIGRATED_MNEMONIC_PHRASE = \"GET_MIGRATED_MNEMONIC_PHRASE\", r.MIGRATE_ACCOUNTS = \"MIGRATE_ACCOUNTS\", r.ADD_ASSETS_LIST = \"ADD_ASSETS_LIST\", r.MODIFY_ASSETS_LIST = \"MODIFY_ASSETS_LIST\", r.CHANGE_ASSET_VISIBILITY = \"CHANGE_ASSET_VISIBILITY\", r.GET_HIDDEN_ASSETS = \"GET_HIDDEN_ASSETS\", r.GET_IS_ACCOUNT_MISMATCH = \"GET_IS_ACCOUNT_MISMATCH\";\n  }(r || (r = {})), function (r) {\n    r.REQUEST_ACCESS = \"REQUEST_ACCESS\", r.REQUEST_PUBLIC_KEY = \"REQUEST_PUBLIC_KEY\", r.SUBMIT_TOKEN = \"SUBMIT_TOKEN\", r.SUBMIT_TRANSACTION = \"SUBMIT_TRANSACTION\", r.SUBMIT_BLOB = \"SUBMIT_BLOB\", r.SUBMIT_AUTH_ENTRY = \"SUBMIT_AUTH_ENTRY\", r.REQUEST_NETWORK = \"REQUEST_NETWORK\", r.REQUEST_NETWORK_DETAILS = \"REQUEST_NETWORK_DETAILS\", r.REQUEST_CONNECTION_STATUS = \"REQUEST_CONNECTION_STATUS\", r.REQUEST_ALLOWED_STATUS = \"REQUEST_ALLOWED_STATUS\", r.SET_ALLOWED_STATUS = \"SET_ALLOWED_STATUS\", r.REQUEST_USER_INFO = \"REQUEST_USER_INFO\";\n  }(e || (e = {}));\n  const n = r => {\n      const s = Date.now() + Math.random();\n      return window.postMessage({\n        source: \"FREIGHTER_EXTERNAL_MSG_REQUEST\",\n        messageId: s,\n        ...r\n      }, window.location.origin), new Promise(t => {\n        let n = 0;\n        r.type !== e.REQUEST_CONNECTION_STATUS && r.type !== e.REQUEST_PUBLIC_KEY || (n = setTimeout(() => {\n          t({\n            isConnected: !1,\n            publicKey: \"\"\n          }), window.removeEventListener(\"message\", o);\n        }, 2e3));\n        const o = r => {\n          var e, E;\n          r.source === window && \"FREIGHTER_EXTERNAL_MSG_RESPONSE\" === (null === (e = null == r ? void 0 : r.data) || void 0 === e ? void 0 : e.source) && (null === (E = null == r ? void 0 : r.data) || void 0 === E ? void 0 : E.messagedId) === s && (t(r.data), window.removeEventListener(\"message\", o), clearTimeout(n));\n        };\n        window.addEventListener(\"message\", o, !1);\n      });\n    },\n    o = {\n      code: -1,\n      message: \"Node environment is not supported\"\n    },\n    E = {\n      code: -1,\n      message: \"The wallet encountered an internal error. Please try again or contact the wallet if the problem persists.\"\n    },\n    T = async () => {\n      let r;\n      try {\n        r = await n({\n          type: e.REQUEST_ACCESS\n        });\n      } catch (r) {\n        console.error(r);\n      }\n      const {\n        publicKey: s\n      } = r || {\n        publicKey: \"\"\n      };\n      return {\n        publicKey: s,\n        error: null == r ? void 0 : r.apiError\n      };\n    },\n    A = async () => {\n      let r;\n      try {\n        r = await n({\n          type: e.REQUEST_PUBLIC_KEY\n        });\n      } catch (r) {\n        console.error(r);\n      }\n      return {\n        publicKey: (null == r ? void 0 : r.publicKey) || \"\",\n        error: null == r ? void 0 : r.apiError\n      };\n    },\n    _ = async () => {\n      let r;\n      try {\n        r = await n({\n          type: e.REQUEST_NETWORK_DETAILS\n        });\n      } catch (r) {\n        console.error(r);\n      }\n      const {\n          networkDetails: s,\n          apiError: t\n        } = r || {\n          networkDetails: {\n            network: \"\",\n            networkName: \"\",\n            networkUrl: \"\",\n            networkPassphrase: \"\",\n            sorobanRpcUrl: void 0,\n            apiError: \"\"\n          }\n        },\n        {\n          network: o,\n          networkUrl: E,\n          networkPassphrase: T,\n          sorobanRpcUrl: A\n        } = s;\n      return {\n        network: o,\n        networkUrl: E,\n        networkPassphrase: T,\n        sorobanRpcUrl: A,\n        error: t\n      };\n    },\n    a = async () => {\n      let r;\n      try {\n        r = await n({\n          type: e.REQUEST_ALLOWED_STATUS\n        });\n      } catch (r) {\n        console.error(r);\n      }\n      const {\n        isAllowed: s\n      } = r || {\n        isAllowed: !1\n      };\n      return {\n        isAllowed: s,\n        error: null == r ? void 0 : r.apiError\n      };\n    },\n    i = async () => {\n      let r = \"\";\n      if (U) {\n        const e = await A();\n        return r = e.publicKey, e.error ? {\n          address: r,\n          error: e.error\n        } : {\n          address: r\n        };\n      }\n      return {\n        address: r,\n        error: o\n      };\n    },\n    S = async r => {\n      if (U) {\n        const s = await (async r => {\n          let s;\n          try {\n            s = await n({\n              contractId: r.contractId,\n              networkPassphrase: r.networkPassphrase,\n              type: e.SUBMIT_TOKEN\n            });\n          } catch (r) {\n            return {\n              error: E\n            };\n          }\n          return {\n            contractId: s.contractId,\n            error: null == s ? void 0 : s.apiError\n          };\n        })(r);\n        return s.error ? {\n          contractId: \"\",\n          error: s.error\n        } : {\n          contractId: s.contractId || \"\"\n        };\n      }\n      return {\n        contractId: \"\",\n        error: o\n      };\n    },\n    d = async (r, s) => {\n      if (U) {\n        const t = await (async (r, s) => {\n          const t = null == s ? void 0 : s.address,\n            o = null == s ? void 0 : s.networkPassphrase;\n          let T;\n          try {\n            T = await n({\n              transactionXdr: r,\n              network: void 0,\n              networkPassphrase: o,\n              accountToSign: t,\n              type: e.SUBMIT_TRANSACTION\n            });\n          } catch (r) {\n            return {\n              signedTransaction: \"\",\n              signerAddress: \"\",\n              error: E\n            };\n          }\n          const {\n            signedTransaction: A,\n            signerAddress: _\n          } = T;\n          return {\n            signedTransaction: A,\n            signerAddress: _,\n            error: null == T ? void 0 : T.apiError\n          };\n        })(r, s);\n        return t.error ? {\n          signedTxXdr: \"\",\n          signerAddress: \"\",\n          error: t.error\n        } : {\n          signedTxXdr: t.signedTransaction,\n          signerAddress: t.signerAddress\n        };\n      }\n      return {\n        signedTxXdr: \"\",\n        signerAddress: \"\",\n        error: o\n      };\n    },\n    l = async (r, s) => {\n      if (U) {\n        const {\n          isAllowed: t\n        } = await a();\n        if (!t) {\n          const r = await T();\n          if (r.error) return {\n            signedMessage: null,\n            signerAddress: \"\",\n            error: r.error\n          };\n        }\n        const o = await (async (r, s, t) => {\n          let o;\n          const T = (t || {}).address;\n          try {\n            o = await n({\n              blob: r,\n              accountToSign: T,\n              apiVersion: \"6.0.1\",\n              networkPassphrase: null == t ? void 0 : t.networkPassphrase,\n              type: e.SUBMIT_BLOB\n            });\n          } catch (r) {\n            return {\n              signedMessage: null,\n              signerAddress: \"\",\n              error: E\n            };\n          }\n          const {\n            signedBlob: A,\n            signerAddress: _\n          } = o;\n          return {\n            signedMessage: A || null,\n            signerAddress: _,\n            error: null == o ? void 0 : o.apiError\n          };\n        })(r, 0, s);\n        return o.error ? {\n          signedMessage: null,\n          signerAddress: \"\",\n          error: o.error\n        } : {\n          signedMessage: o.signedMessage,\n          signerAddress: o.signerAddress\n        };\n      }\n      return {\n        signedMessage: null,\n        signerAddress: \"\",\n        error: o\n      };\n    },\n    N = async (r, s) => {\n      if (U) {\n        const {\n          isAllowed: t\n        } = await a();\n        if (!t) {\n          const r = await T();\n          if (r.error) return {\n            signedAuthEntry: null,\n            signerAddress: \"\",\n            error: r.error\n          };\n        }\n        const o = await (async (r, s, t) => {\n          const o = (t || {}).address;\n          let T;\n          try {\n            T = await n({\n              entryXdr: r,\n              accountToSign: o,\n              apiVersion: \"6.0.1\",\n              networkPassphrase: null == t ? void 0 : t.networkPassphrase,\n              type: e.SUBMIT_AUTH_ENTRY\n            });\n          } catch (r) {\n            return console.error(r), {\n              signedAuthEntry: null,\n              signerAddress: \"\",\n              error: E\n            };\n          }\n          const {\n            signedAuthEntry: A,\n            signerAddress: _\n          } = T;\n          return {\n            signedAuthEntry: A || null,\n            signerAddress: _,\n            error: null == T ? void 0 : T.apiError\n          };\n        })(r, 0, s);\n        return o.error ? {\n          signedAuthEntry: null,\n          signerAddress: \"\",\n          error: o.error\n        } : {\n          signedAuthEntry: o.signedAuthEntry,\n          signerAddress: o.signerAddress\n        };\n      }\n      return {\n        signedAuthEntry: null,\n        signerAddress: \"\",\n        error: o\n      };\n    },\n    c = async () => U ? window.freighter ? Promise.resolve({\n      isConnected: window.freighter\n    }) : (async () => {\n      let r = {\n        isConnected: !1\n      };\n      try {\n        r = await n({\n          type: e.REQUEST_CONNECTION_STATUS\n        });\n      } catch (r) {\n        console.error(r);\n      }\n      return {\n        isConnected: r.isConnected\n      };\n    })() : {\n      isConnected: !1,\n      error: o\n    },\n    C = async () => {\n      if (U) {\n        const r = await (async () => {\n          let r;\n          try {\n            r = await n({\n              type: e.REQUEST_NETWORK_DETAILS\n            });\n          } catch (r) {\n            console.error(r);\n          }\n          const {\n            networkDetails: s\n          } = r || {\n            networkDetails: {\n              network: \"\",\n              networkPassphrase: \"\"\n            }\n          };\n          return {\n            network: null == s ? void 0 : s.network,\n            networkPassphrase: null == s ? void 0 : s.networkPassphrase,\n            error: null == r ? void 0 : r.apiError\n          };\n        })();\n        return r.error ? {\n          network: \"\",\n          networkPassphrase: \"\",\n          error: r.error\n        } : {\n          network: r.network,\n          networkPassphrase: r.networkPassphrase\n        };\n      }\n      return {\n        network: \"\",\n        networkPassphrase: \"\",\n        error: o\n      };\n    },\n    O = async () => {\n      if (U) {\n        const r = await _();\n        return r.error ? {\n          network: \"\",\n          networkUrl: \"\",\n          networkPassphrase: \"\",\n          error: r.error\n        } : {\n          network: r.network,\n          networkUrl: r.networkUrl,\n          networkPassphrase: r.networkPassphrase,\n          sorobanRpcUrl: r.sorobanRpcUrl\n        };\n      }\n      return {\n        network: \"\",\n        networkUrl: \"\",\n        networkPassphrase: \"\",\n        error: o\n      };\n    },\n    I = async () => {\n      let r = !1;\n      if (U) {\n        const e = await a();\n        return r = e.isAllowed, e.error ? {\n          isAllowed: r,\n          error: e.error\n        } : {\n          isAllowed: r\n        };\n      }\n      return {\n        isAllowed: r,\n        error: o\n      };\n    },\n    R = async () => {\n      let r = !1;\n      if (U) {\n        const s = await (async () => {\n          let r;\n          try {\n            r = await n({\n              type: e.SET_ALLOWED_STATUS\n            });\n          } catch (r) {\n            console.error(r);\n          }\n          const {\n            isAllowed: s\n          } = r || {\n            isAllowed: !1\n          };\n          return {\n            isAllowed: s,\n            error: null == r ? void 0 : r.apiError\n          };\n        })();\n        return r = s.isAllowed, s.error ? {\n          isAllowed: r,\n          error: s.error\n        } : {\n          isAllowed: r\n        };\n      }\n      return {\n        isAllowed: r,\n        error: o\n      };\n    },\n    w = async () => {\n      let r = \"\";\n      if (U) {\n        const e = await T();\n        return r = e.publicKey, e.error ? {\n          address: r,\n          error: e.error\n        } : {\n          address: r\n        };\n      }\n      return {\n        address: r,\n        error: o\n      };\n    };\n  class u {\n    constructor(r = 3e3) {\n      this.fetchInfo = async r => {\n        if (!this.isRunning) return;\n        const e = await A(),\n          s = await _();\n        (e.error || s.error) && r({\n          address: \"\",\n          network: \"\",\n          networkPassphrase: \"\",\n          error: e.error || s.error\n        }), this.currentAddress === e.publicKey && this.currentNetwork === s.network && this.currentNetworkPassphrase === s.networkPassphrase || (this.currentAddress = e.publicKey, this.currentNetwork = s.network, this.currentNetworkPassphrase = s.networkPassphrase, r({\n          address: e.publicKey,\n          network: s.network,\n          networkPassphrase: s.networkPassphrase\n        })), setTimeout(() => this.fetchInfo(r), this.timeout);\n      }, this.timeout = r, this.currentAddress = \"\", this.currentNetwork = \"\", this.currentNetworkPassphrase = \"\", this.isRunning = !1;\n    }\n    watch(r) {\n      return U ? (this.isRunning = !0, this.fetchInfo(r), {}) : {\n        error: o\n      };\n    }\n    stop() {\n      this.isRunning = !1;\n    }\n  }\n  const U = \"undefined\" != typeof window,\n    D = {\n      getAddress: i,\n      addToken: S,\n      signTransaction: d,\n      signMessage: l,\n      signAuthEntry: N,\n      isConnected: c,\n      getNetwork: C,\n      getNetworkDetails: O,\n      isAllowed: I,\n      setAllowed: R,\n      requestAccess: w,\n      WatchWalletChanges: u\n    };\n  return t;\n})());","map":{"version":3,"names":["r","e","exports","module","define","amd","freighterApi","s","d","__webpack_require__","t","o","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","Symbol","toStringTag","value","CREATE_ACCOUNT","FUND_ACCOUNT","ADD_ACCOUNT","IMPORT_ACCOUNT","IMPORT_HARDWARE_WALLET","LOAD_ACCOUNT","MAKE_ACCOUNT_ACTIVE","UPDATE_ACCOUNT_NAME","GET_MNEMONIC_PHRASE","CONFIRM_MNEMONIC_PHRASE","CONFIRM_MIGRATED_MNEMONIC_PHRASE","RECOVER_ACCOUNT","CONFIRM_PASSWORD","REJECT_ACCESS","GRANT_ACCESS","ADD_TOKEN","SIGN_TRANSACTION","SIGN_BLOB","SIGN_AUTH_ENTRY","HANDLE_SIGNED_HW_PAYLOAD","REJECT_TRANSACTION","SIGN_FREIGHTER_TRANSACTION","SIGN_FREIGHTER_SOROBAN_TRANSACTION","ADD_RECENT_ADDRESS","LOAD_RECENT_ADDRESSES","LOAD_LAST_USED_ACCOUNT","SIGN_OUT","SHOW_BACKUP_PHRASE","SAVE_ALLOWLIST","SAVE_SETTINGS","SAVE_EXPERIMENTAL_FEATURES","LOAD_SETTINGS","LOAD_BACKEND_SETTINGS","GET_CACHED_ASSET_ICON_LIST","GET_CACHED_ASSET_ICON","CACHE_ASSET_ICON","GET_CACHED_ASSET_DOMAIN","CACHE_ASSET_DOMAIN","GET_MEMO_REQUIRED_ACCOUNTS","ADD_CUSTOM_NETWORK","CHANGE_NETWORK","REMOVE_CUSTOM_NETWORK","EDIT_CUSTOM_NETWORK","RESET_EXP_DATA","ADD_TOKEN_ID","GET_TOKEN_IDS","REMOVE_TOKEN_ID","GET_MIGRATABLE_ACCOUNTS","GET_MIGRATED_MNEMONIC_PHRASE","MIGRATE_ACCOUNTS","ADD_ASSETS_LIST","MODIFY_ASSETS_LIST","CHANGE_ASSET_VISIBILITY","GET_HIDDEN_ASSETS","GET_IS_ACCOUNT_MISMATCH","REQUEST_ACCESS","REQUEST_PUBLIC_KEY","SUBMIT_TOKEN","SUBMIT_TRANSACTION","SUBMIT_BLOB","SUBMIT_AUTH_ENTRY","REQUEST_NETWORK","REQUEST_NETWORK_DETAILS","REQUEST_CONNECTION_STATUS","REQUEST_ALLOWED_STATUS","SET_ALLOWED_STATUS","REQUEST_USER_INFO","n","Date","now","Math","random","window","postMessage","source","messageId","location","origin","Promise","type","setTimeout","isConnected","publicKey","removeEventListener","data","E","messagedId","clearTimeout","addEventListener","code","message","T","console","error","apiError","A","_","networkDetails","network","networkName","networkUrl","networkPassphrase","sorobanRpcUrl","a","isAllowed","i","U","address","S","contractId","transactionXdr","accountToSign","signedTransaction","signerAddress","signedTxXdr","l","signedMessage","blob","apiVersion","signedBlob","N","signedAuthEntry","entryXdr","c","freighter","resolve","C","O","I","R","w","u","constructor","fetchInfo","isRunning","currentAddress","currentNetwork","currentNetworkPassphrase","timeout","watch","stop","D","getAddress","addToken","signTransaction","signMessage","signAuthEntry","getNetwork","getNetworkDetails","setAllowed","requestAccess","WatchWalletChanges"],"sources":["webpack://freighterApi/webpack/universalModuleDefinition","webpack://freighterApi/webpack/bootstrap","webpack://freighterApi/src/home/runner/work/freighter/freighter/@shared/constants/services.ts","webpack://freighterApi/webpack/runtime/define property getters","webpack://freighterApi/webpack/runtime/hasOwnProperty shorthand","webpack://freighterApi/webpack/runtime/make namespace object","webpack://freighterApi/src/home/runner/work/freighter/freighter/@shared/api/helpers/extensionMessaging.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@shared/api/external.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/getAddress.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/addToken.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/signTransaction.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/signMessage.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/signAuthEntry.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/isConnected.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/getNetwork.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/getNetworkDetails.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/isAllowed.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/setAllowed.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/requestAccess.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/watchWalletChanges.ts","webpack://freighterApi/src/home/runner/work/freighter/freighter/@stellar/freighter-api/src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"freighterApi\"] = factory();\n\telse\n\t\troot[\"freighterApi\"] = factory();\n})(this, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","export enum SERVICE_TYPES {\n  CREATE_ACCOUNT = \"CREATE_ACCOUNT\",\n  FUND_ACCOUNT = \"FUND_ACCOUNT\",\n  ADD_ACCOUNT = \"ADD_ACCOUNT\",\n  IMPORT_ACCOUNT = \"IMPORT_ACCOUNT\",\n  IMPORT_HARDWARE_WALLET = \"IMPORT_HARDWARE_WALLET\",\n  LOAD_ACCOUNT = \"LOAD_ACCOUNT\",\n  MAKE_ACCOUNT_ACTIVE = \"MAKE_ACCOUNT_ACTIVE\",\n  UPDATE_ACCOUNT_NAME = \"UPDATE_ACCOUNT_NAME\",\n  GET_MNEMONIC_PHRASE = \"GET_MNEMONIC_PHRASE\",\n  CONFIRM_MNEMONIC_PHRASE = \"CONFIRM_MNEMONIC_PHRASE\",\n  CONFIRM_MIGRATED_MNEMONIC_PHRASE = \"CONFIRM_MIGRATED_MNEMONIC_PHRASE\",\n  RECOVER_ACCOUNT = \"RECOVER_ACCOUNT\",\n  CONFIRM_PASSWORD = \"CONFIRM_PASSWORD\",\n  REJECT_ACCESS = \"REJECT_ACCESS\",\n  GRANT_ACCESS = \"GRANT_ACCESS\",\n  ADD_TOKEN = \"ADD_TOKEN\",\n  SIGN_TRANSACTION = \"SIGN_TRANSACTION\",\n  SIGN_BLOB = \"SIGN_BLOB\",\n  SIGN_AUTH_ENTRY = \"SIGN_AUTH_ENTRY\",\n  HANDLE_SIGNED_HW_PAYLOAD = \"HANDLE_SIGNED_HW_PAYLOAD\",\n  REJECT_TRANSACTION = \"REJECT_TRANSACTION\",\n  SIGN_FREIGHTER_TRANSACTION = \"SIGN_FREIGHTER_TRANSACTION\",\n  SIGN_FREIGHTER_SOROBAN_TRANSACTION = \"SIGN_FREIGHTER_SOROBAN_TRANSACTION\",\n  ADD_RECENT_ADDRESS = \"ADD_RECENT_ADDRESS\",\n  LOAD_RECENT_ADDRESSES = \"LOAD_RECENT_ADDRESSES\",\n  LOAD_LAST_USED_ACCOUNT = \"LOAD_LAST_USED_ACCOUNT\",\n  SIGN_OUT = \"SIGN_OUT\",\n  SHOW_BACKUP_PHRASE = \"SHOW_BACKUP_PHRASE\",\n  SAVE_ALLOWLIST = \"SAVE_ALLOWLIST\",\n  SAVE_SETTINGS = \"SAVE_SETTINGS\",\n  SAVE_EXPERIMENTAL_FEATURES = \"SAVE_EXPERIMENTAL_FEATURES\",\n  LOAD_SETTINGS = \"LOAD_SETTINGS\",\n  LOAD_BACKEND_SETTINGS = \"LOAD_BACKEND_SETTINGS\",\n  GET_CACHED_ASSET_ICON_LIST = \"GET_CACHED_ASSET_ICON_LIST\",\n  GET_CACHED_ASSET_ICON = \"GET_CACHED_ASSET_ICON\",\n  CACHE_ASSET_ICON = \"CACHE_ASSET_ICON\",\n  GET_CACHED_ASSET_DOMAIN = \"GET_CACHED_ASSET_DOMAIN\",\n  CACHE_ASSET_DOMAIN = \"CACHE_ASSET_DOMAIN\",\n  GET_MEMO_REQUIRED_ACCOUNTS = \"GET_MEMO_REQUIRED_ACCOUNTS\",\n  ADD_CUSTOM_NETWORK = \"ADD_CUSTOM_NETWORK\",\n  CHANGE_NETWORK = \"CHANGE_NETWORK\",\n  REMOVE_CUSTOM_NETWORK = \"REMOVE_CUSTOM_NETWORK\",\n  EDIT_CUSTOM_NETWORK = \"EDIT_CUSTOM_NETWORK\",\n  RESET_EXP_DATA = \"RESET_EXP_DATA\",\n  ADD_TOKEN_ID = \"ADD_TOKEN_ID\",\n  GET_TOKEN_IDS = \"GET_TOKEN_IDS\",\n  REMOVE_TOKEN_ID = \"REMOVE_TOKEN_ID\",\n  GET_MIGRATABLE_ACCOUNTS = \"GET_MIGRATABLE_ACCOUNTS\",\n  GET_MIGRATED_MNEMONIC_PHRASE = \"GET_MIGRATED_MNEMONIC_PHRASE\",\n  MIGRATE_ACCOUNTS = \"MIGRATE_ACCOUNTS\",\n  ADD_ASSETS_LIST = \"ADD_ASSETS_LIST\",\n  MODIFY_ASSETS_LIST = \"MODIFY_ASSETS_LIST\",\n  CHANGE_ASSET_VISIBILITY = \"CHANGE_ASSET_VISIBILITY\",\n  GET_HIDDEN_ASSETS = \"GET_HIDDEN_ASSETS\",\n  GET_IS_ACCOUNT_MISMATCH = \"GET_IS_ACCOUNT_MISMATCH\",\n}\n\nexport enum EXTERNAL_SERVICE_TYPES {\n  REQUEST_ACCESS = \"REQUEST_ACCESS\",\n  REQUEST_PUBLIC_KEY = \"REQUEST_PUBLIC_KEY\",\n  SUBMIT_TOKEN = \"SUBMIT_TOKEN\",\n  SUBMIT_TRANSACTION = \"SUBMIT_TRANSACTION\",\n  SUBMIT_BLOB = \"SUBMIT_BLOB\",\n  SUBMIT_AUTH_ENTRY = \"SUBMIT_AUTH_ENTRY\",\n  REQUEST_NETWORK = \"REQUEST_NETWORK\",\n  REQUEST_NETWORK_DETAILS = \"REQUEST_NETWORK_DETAILS\",\n  REQUEST_CONNECTION_STATUS = \"REQUEST_CONNECTION_STATUS\",\n  REQUEST_ALLOWED_STATUS = \"REQUEST_ALLOWED_STATUS\",\n  SET_ALLOWED_STATUS = \"SET_ALLOWED_STATUS\",\n  REQUEST_USER_INFO = \"REQUEST_USER_INFO\",\n}\n\nexport const EXTERNAL_MSG_REQUEST = \"FREIGHTER_EXTERNAL_MSG_REQUEST\";\nexport const EXTERNAL_MSG_RESPONSE = \"FREIGHTER_EXTERNAL_MSG_RESPONSE\";\n\ndeclare const DEV_SERVER: string;\nconst _DEV_SERVER = DEV_SERVER;\nexport { _DEV_SERVER as DEV_SERVER };\n\ndeclare const DEV_EXTENSION: string;\nconst _DEV_EXTENSION = DEV_EXTENSION;\nexport { _DEV_EXTENSION as DEV_EXTENSION };\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import browser from \"webextension-polyfill\";\nimport {\n  DEV_SERVER,\n  EXTERNAL_MSG_RESPONSE,\n  EXTERNAL_MSG_REQUEST,\n  EXTERNAL_SERVICE_TYPES,\n  SERVICE_TYPES,\n} from \"../../constants/services\";\nimport { Response } from \"../types\";\n\ntype Msg =\n  | {\n      [key: string]: any;\n      activePublicKey: string | null;\n      type: SERVICE_TYPES;\n    }\n  | {\n      [key: string]: any;\n      type: EXTERNAL_SERVICE_TYPES;\n    };\n\nexport const sendMessageToContentScript = (msg: Msg): Promise<Response> => {\n  /* \n    In the case of multiple calls coming in sequentially, we use this MESSAGE_ID to make sure we're responding to\n    the appropriate message sender. Otherwise, we can run into race conditions where we simply resolve all \n    sent messages with the first thing that comes back.\n  */\n  const MESSAGE_ID = Date.now() + Math.random();\n\n  window.postMessage(\n    { source: EXTERNAL_MSG_REQUEST, messageId: MESSAGE_ID, ...msg },\n    window.location.origin\n  );\n  return new Promise((resolve) => {\n    let requestTimeout = 0 as any;\n\n    /* \n      In the case that Freighter is not installed at all, any messages to \n      background from freighter-api will hang forever and not respond in any way. \n      This is especially a problem for the isConnected method, because this is \n      likely to be called in a situation where Freighter isn't installed.\n      To prevent this, we add a timeout to automatically resolve in the event \n      Freighter doesn't respond in a timely fashion to this method.\n    */\n    if (\n      msg.type === EXTERNAL_SERVICE_TYPES.REQUEST_CONNECTION_STATUS ||\n      msg.type === EXTERNAL_SERVICE_TYPES.REQUEST_PUBLIC_KEY\n    ) {\n      requestTimeout = setTimeout(() => {\n        resolve({\n          isConnected: false,\n          publicKey: \"\",\n        } as Response);\n        window.removeEventListener(\"message\", messageListener);\n      }, 2000);\n    }\n\n    const messageListener = (event: { source: any; data: Response }) => {\n      // We only accept messages from ourselves\n      if (event.source !== window) return;\n      // Only respond to messages tagged as being from our content script\n      if (event?.data?.source !== EXTERNAL_MSG_RESPONSE) return;\n      // Only respond to messages that this instance of sendMessageToContentScript sent\n      if (event?.data?.messagedId !== MESSAGE_ID) return;\n\n      resolve(event.data);\n      window.removeEventListener(\"message\", messageListener);\n      clearTimeout(requestTimeout);\n    };\n    window.addEventListener(\"message\", messageListener, false);\n  });\n};\n\nexport const sendMessageToBackground = async (msg: Msg): Promise<Response> => {\n  let res;\n\n  if (DEV_SERVER) {\n    // treat this as an external call because we're making the call from the browser, not the popup\n    res = await sendMessageToContentScript(msg);\n  } else {\n    res = (await browser.runtime.sendMessage(msg)) as Response;\n  }\n\n  return res as Response;\n};\n\nexport const FreighterApiNodeError = {\n  code: -1,\n  message: \"Node environment is not supported\",\n};\n\nexport const FreighterApiInternalError = {\n  code: -1,\n  message:\n    \"The wallet encountered an internal error. Please try again or contact the wallet if the problem persists.\",\n};\n\nexport const FreighterApiDeclinedError = {\n  code: -4,\n  message: \"The user rejected this request.\",\n};\n","import { EXTERNAL_SERVICE_TYPES } from \"../constants/services\";\nimport { NetworkDetails } from \"../constants/stellar\";\nimport {\n  sendMessageToContentScript,\n  FreighterApiInternalError,\n} from \"./helpers/extensionMessaging\";\nimport { FreighterApiError } from \"./types\";\n\nexport const requestAccess = async (): Promise<{\n  publicKey: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_ACCESS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { publicKey } = response || { publicKey: \"\" };\n\n  return { publicKey, error: response?.apiError };\n};\n\nexport const requestPublicKey = async (): Promise<{\n  publicKey: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_PUBLIC_KEY,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  return { publicKey: response?.publicKey || \"\", error: response?.apiError };\n};\n\nexport const submitToken = async (args: {\n  contractId: string;\n  networkPassphrase?: string;\n}): Promise<{\n  contractId?: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      contractId: args.contractId,\n      networkPassphrase: args.networkPassphrase,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_TOKEN,\n    });\n  } catch (e) {\n    return {\n      error: FreighterApiInternalError,\n    };\n  }\n\n  return {\n    contractId: response.contractId,\n    error: response?.apiError,\n  };\n};\n\nexport const submitTransaction = async (\n  transactionXdr: string,\n  opts?: {\n    address?: string;\n    networkPassphrase?: string;\n  },\n): Promise<{\n  signedTransaction: string;\n  signerAddress: string;\n  error?: FreighterApiError;\n}> => {\n  let network;\n\n  const _accountToSign = opts?.address;\n  const networkPassphrase = opts?.networkPassphrase;\n\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      transactionXdr,\n      network,\n      networkPassphrase,\n      accountToSign: _accountToSign,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_TRANSACTION,\n    });\n  } catch (e) {\n    return {\n      signedTransaction: \"\",\n      signerAddress: \"\",\n      error: FreighterApiInternalError,\n    };\n  }\n  const { signedTransaction, signerAddress } = response;\n\n  return { signedTransaction, signerAddress, error: response?.apiError };\n};\n\nexport const submitMessage = async (\n  blob: string,\n  version: string,\n  opts?: {\n    address?: string;\n    networkPassphrase?: string;\n  },\n): Promise<{\n  signedMessage: string | null;\n  signerAddress: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  const _opts = opts || {};\n  const accountToSign = _opts.address;\n  try {\n    response = await sendMessageToContentScript({\n      blob,\n      accountToSign,\n      apiVersion: version,\n      networkPassphrase: opts?.networkPassphrase,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_BLOB,\n    });\n  } catch (e) {\n    return {\n      signedMessage: null,\n      signerAddress: \"\",\n      error: FreighterApiInternalError,\n    };\n  }\n  const { signedBlob, signerAddress } = response;\n\n  return {\n    signedMessage: signedBlob || null,\n    signerAddress,\n    error: response?.apiError,\n  };\n};\n\nexport const submitAuthEntry = async (\n  entryXdr: string,\n  version: string,\n  opts?: {\n    address?: string;\n    networkPassphrase?: string;\n  },\n): Promise<{\n  signedAuthEntry: string | null;\n  signerAddress: string;\n  error?: FreighterApiError;\n}> => {\n  const _opts = opts || {};\n  const accountToSign = _opts.address;\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      entryXdr,\n      accountToSign,\n      apiVersion: version,\n      networkPassphrase: opts?.networkPassphrase,\n      type: EXTERNAL_SERVICE_TYPES.SUBMIT_AUTH_ENTRY,\n    });\n  } catch (e) {\n    console.error(e);\n    return {\n      signedAuthEntry: null,\n      signerAddress: \"\",\n      error: FreighterApiInternalError,\n    };\n  }\n  const { signedAuthEntry, signerAddress } = response;\n\n  return {\n    signedAuthEntry: signedAuthEntry || null,\n    signerAddress,\n    error: response?.apiError,\n  };\n};\n\nexport const requestNetwork = async (): Promise<{\n  network: string;\n  networkPassphrase: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_NETWORK_DETAILS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { networkDetails } = response || {\n    networkDetails: { network: \"\", networkPassphrase: \"\" },\n  };\n\n  return {\n    network: networkDetails?.network,\n    networkPassphrase: networkDetails?.networkPassphrase,\n    error: response?.apiError,\n  };\n};\n\nexport const requestNetworkDetails = async (): Promise<{\n  network: string;\n  networkUrl: string;\n  networkPassphrase: string;\n  sorobanRpcUrl?: string;\n  error?: FreighterApiError;\n}> => {\n  let response;\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_NETWORK_DETAILS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { networkDetails, apiError } = response || {\n    networkDetails: {\n      network: \"\",\n      networkName: \"\",\n      networkUrl: \"\",\n      networkPassphrase: \"\",\n      sorobanRpcUrl: undefined,\n      apiError: \"\",\n    } as NetworkDetails,\n  };\n\n  const { network, networkUrl, networkPassphrase, sorobanRpcUrl } =\n    networkDetails;\n\n  return {\n    network,\n    networkUrl,\n    networkPassphrase,\n    sorobanRpcUrl,\n    error: apiError,\n  };\n};\n\nexport const requestConnectionStatus = async (): Promise<{\n  isConnected: boolean;\n}> => {\n  let response = {\n    isConnected: false,\n  };\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_CONNECTION_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  return { isConnected: response.isConnected };\n};\n\nexport const requestAllowedStatus = async (): Promise<{\n  isAllowed: boolean;\n  error?: FreighterApiError;\n}> => {\n  let response;\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.REQUEST_ALLOWED_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { isAllowed } = response || { isAllowed: false };\n\n  return { isAllowed, error: response?.apiError };\n};\n\nexport const setAllowedStatus = async (): Promise<{\n  isAllowed: boolean;\n  error?: FreighterApiError;\n}> => {\n  let response;\n\n  try {\n    response = await sendMessageToContentScript({\n      type: EXTERNAL_SERVICE_TYPES.SET_ALLOWED_STATUS,\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  const { isAllowed } = response || {\n    isAllowed: false,\n  };\n\n  return { isAllowed, error: response?.apiError };\n};\n","import { requestPublicKey } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const getAddress = async (): Promise<\n  { address: string } & { error?: FreighterApiError }\n> => {\n  let address = \"\";\n  if (isBrowser) {\n    const req = await requestPublicKey();\n    address = req.publicKey;\n\n    if (req.error) {\n      return { address, error: req.error };\n    }\n\n    return { address };\n  }\n\n  return { address, error: FreighterApiNodeError };\n};\n","import { submitToken } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const addToken = async (args: {\n  contractId: string;\n  networkPassphrase?: string;\n}): Promise<{ contractId: string } & { error?: FreighterApiError }> => {\n  if (isBrowser) {\n    const req = await submitToken(args);\n\n    if (req.error) {\n      return { contractId: \"\", error: req.error };\n    }\n\n    return { contractId: req.contractId || \"\" };\n  }\n\n  return { contractId: \"\", error: FreighterApiNodeError };\n};\n","import { submitTransaction } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const signTransaction = async (\n  transactionXdr: string,\n  opts?: {\n    networkPassphrase?: string;\n    address?: string;\n  },\n): Promise<\n  { signedTxXdr: string; signerAddress: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const req = await submitTransaction(transactionXdr, opts);\n\n    if (req.error) {\n      return { signedTxXdr: \"\", signerAddress: \"\", error: req.error };\n    }\n\n    return {\n      signedTxXdr: req.signedTransaction,\n      signerAddress: req.signerAddress,\n    };\n  }\n\n  return { signedTxXdr: \"\", signerAddress: \"\", error: FreighterApiNodeError };\n};\n","import { Buffer } from \"buffer\";\n\nimport {\n  requestAllowedStatus,\n  requestAccess,\n  submitMessage,\n} from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\ntype SignMessageV3Response = {\n  signedMessage: Buffer | null;\n  signerAddress: string;\n} & {\n  error?: FreighterApiError;\n};\n\ntype SignMessageV4Response = {\n  signedMessage: string | null;\n  signerAddress: string;\n} & {\n  error?: FreighterApiError;\n};\n\nexport const signMessage = async (\n  message: string,\n  opts?: {\n    networkPassphrase?: string;\n    address?: string;\n  },\n): Promise<SignMessageV3Response | SignMessageV4Response> => {\n  if (isBrowser) {\n    const { isAllowed } = await requestAllowedStatus();\n    if (!isAllowed) {\n      const req = await requestAccess();\n\n      if (req.error) {\n        return { signedMessage: null, signerAddress: \"\", error: req.error };\n      }\n    }\n\n    const req = await submitMessage(message, __PACKAGE_VERSION__, opts);\n\n    if (req.error) {\n      return { signedMessage: null, signerAddress: \"\", error: req.error };\n    }\n\n    return {\n      signedMessage: req.signedMessage,\n      signerAddress: req.signerAddress,\n    };\n  }\n\n  return {\n    signedMessage: null,\n    signerAddress: \"\",\n    error: FreighterApiNodeError,\n  };\n};\n","import {\n  requestAccess,\n  requestAllowedStatus,\n  submitAuthEntry,\n} from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const signAuthEntry = async (\n  entryXdr: string,\n  opts?: {\n    networkPassphrase?: string;\n    address?: string;\n  },\n): Promise<\n  { signedAuthEntry: string | null; signerAddress: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const { isAllowed } = await requestAllowedStatus();\n    if (!isAllowed) {\n      const req = await requestAccess();\n\n      if (req.error) {\n        return { signedAuthEntry: null, signerAddress: \"\", error: req.error };\n      }\n    }\n\n    const req = await submitAuthEntry(entryXdr, __PACKAGE_VERSION__, opts);\n\n    if (req.error) {\n      return { signedAuthEntry: null, signerAddress: \"\", error: req.error };\n    }\n\n    return {\n      signedAuthEntry: req.signedAuthEntry,\n      signerAddress: req.signerAddress,\n    };\n  }\n\n  return {\n    signedAuthEntry: null,\n    signerAddress: \"\",\n    error: FreighterApiNodeError,\n  };\n};\n","import { requestConnectionStatus } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const isConnected = async (): Promise<\n  { isConnected: boolean } & { error?: FreighterApiError }\n> => {\n  if (isBrowser) {\n    if (window.freighter) {\n      return Promise.resolve({ isConnected: window.freighter });\n    }\n\n    return requestConnectionStatus();\n  }\n\n  return { isConnected: false, error: FreighterApiNodeError };\n};\n","import { requestNetwork } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const getNetwork = async (): Promise<\n  { network: string; networkPassphrase: string } & {\n    error?: FreighterApiError;\n  }\n> => {\n  if (isBrowser) {\n    const req = await requestNetwork();\n\n    if (req.error) {\n      return { network: \"\", networkPassphrase: \"\", error: req.error };\n    }\n\n    return { network: req.network, networkPassphrase: req.networkPassphrase };\n  }\n\n  return { network: \"\", networkPassphrase: \"\", error: FreighterApiNodeError };\n};\n","import { requestNetworkDetails } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const getNetworkDetails = async (): Promise<\n  {\n    network: string;\n    networkUrl: string;\n    networkPassphrase: string;\n    sorobanRpcUrl?: string;\n  } & { error?: FreighterApiError }\n> => {\n  if (isBrowser) {\n    const req = await requestNetworkDetails();\n\n    if (req.error) {\n      return {\n        network: \"\",\n        networkUrl: \"\",\n        networkPassphrase: \"\",\n        error: req.error,\n      };\n    }\n\n    return {\n      network: req.network,\n      networkUrl: req.networkUrl,\n      networkPassphrase: req.networkPassphrase,\n      sorobanRpcUrl: req.sorobanRpcUrl,\n    };\n  }\n\n  return {\n    network: \"\",\n    networkUrl: \"\",\n    networkPassphrase: \"\",\n    error: FreighterApiNodeError,\n  };\n};\n","import { requestAllowedStatus } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const isAllowed = async (): Promise<\n  { isAllowed: boolean } & { error?: FreighterApiError }\n> => {\n  let isAllowed = false;\n  if (isBrowser) {\n    const req = await requestAllowedStatus();\n    isAllowed = req.isAllowed;\n\n    if (req.error) {\n      return { isAllowed, error: req.error };\n    }\n\n    return { isAllowed };\n  }\n\n  return { isAllowed, error: FreighterApiNodeError };\n};\n","import { setAllowedStatus } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const setAllowed = async (): Promise<\n  { isAllowed: boolean } & { error?: FreighterApiError }\n> => {\n  let isAllowed = false;\n  if (isBrowser) {\n    const req = await setAllowedStatus();\n    isAllowed = req.isAllowed;\n\n    if (req.error) {\n      return { isAllowed, error: req.error };\n    }\n\n    return { isAllowed };\n  }\n\n  return { isAllowed, error: FreighterApiNodeError };\n};\n","import { requestAccess as requestAccessApi } from \"@shared/api/external\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { isBrowser } from \".\";\n\nexport const requestAccess = async (): Promise<\n  { address: string } & { error?: FreighterApiError }\n> => {\n  let address = \"\";\n  if (isBrowser) {\n    const req = await requestAccessApi();\n    address = req.publicKey;\n\n    if (req.error) {\n      return { address, error: req.error };\n    }\n\n    return { address };\n  }\n\n  return { address, error: FreighterApiNodeError };\n};\n","import { requestPublicKey } from \"@shared/api/external\";\nimport { requestNetworkDetails } from \"@shared/api/external\";\nimport { FreighterApiNodeError } from \"@shared/api/helpers/extensionMessaging\";\nimport { FreighterApiError } from \"@shared/api/types\";\nimport { isBrowser } from \".\";\n\ninterface CallbackParams {\n  address: string;\n  network: string;\n  networkPassphrase: string;\n  error?: FreighterApiError;\n}\n\nexport class WatchWalletChanges {\n  timeout: number;\n  currentAddress: string;\n  currentNetwork: string;\n  currentNetworkPassphrase: string;\n  isRunning: boolean;\n\n  constructor(timeout = 3000) {\n    this.timeout = timeout;\n    this.currentAddress = \"\";\n    this.currentNetwork = \"\";\n    this.currentNetworkPassphrase = \"\";\n    this.isRunning = false;\n  }\n\n  watch(cb: (params: CallbackParams) => void): { error?: FreighterApiError } {\n    if (!isBrowser) {\n      return { error: FreighterApiNodeError };\n    }\n    this.isRunning = true;\n    this.fetchInfo(cb);\n\n    return {};\n  }\n\n  fetchInfo = async (cb: (params: CallbackParams) => void) => {\n    if (!this.isRunning) {\n      return;\n    }\n    const publicKeyReq = await requestPublicKey();\n    const networkDetailsReq = await requestNetworkDetails();\n\n    if (publicKeyReq.error || networkDetailsReq.error) {\n      cb({\n        address: \"\",\n        network: \"\",\n        networkPassphrase: \"\",\n        error: publicKeyReq.error || networkDetailsReq.error,\n      });\n    }\n\n    if (\n      this.currentAddress !== publicKeyReq.publicKey ||\n      this.currentNetwork !== networkDetailsReq.network ||\n      this.currentNetworkPassphrase !== networkDetailsReq.networkPassphrase\n    ) {\n      this.currentAddress = publicKeyReq.publicKey;\n      this.currentNetwork = networkDetailsReq.network;\n      this.currentNetworkPassphrase = networkDetailsReq.networkPassphrase;\n\n      cb({\n        address: publicKeyReq.publicKey,\n        network: networkDetailsReq.network,\n        networkPassphrase: networkDetailsReq.networkPassphrase,\n      });\n    }\n\n    setTimeout(() => this.fetchInfo(cb), this.timeout);\n  };\n\n  stop() {\n    this.isRunning = false;\n  }\n}\n","import { getAddress } from \"./getAddress\";\nimport { addToken } from \"./addToken\";\nimport { signTransaction } from \"./signTransaction\";\nimport { signMessage } from \"./signMessage\";\nimport { signAuthEntry } from \"./signAuthEntry\";\nimport { isConnected } from \"./isConnected\";\nimport { getNetwork } from \"./getNetwork\";\nimport { getNetworkDetails } from \"./getNetworkDetails\";\nimport { isAllowed } from \"./isAllowed\";\nimport { setAllowed } from \"./setAllowed\";\nimport { requestAccess } from \"./requestAccess\";\nimport { WatchWalletChanges } from \"./watchWalletChanges\";\n\nexport const isBrowser = typeof window !== \"undefined\";\n\nexport {\n  getAddress,\n  addToken,\n  signTransaction,\n  signMessage,\n  signAuthEntry,\n  isConnected,\n  getNetwork,\n  getNetworkDetails,\n  isAllowed,\n  setAllowed,\n  requestAccess,\n  WatchWalletChanges,\n};\nexport default {\n  getAddress,\n  addToken,\n  signTransaction,\n  signMessage,\n  signAuthEntry,\n  isConnected,\n  getNetwork,\n  getNetworkDetails,\n  isAllowed,\n  setAllowed,\n  requestAccess,\n  WatchWalletChanges,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}