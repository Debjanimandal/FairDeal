{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\debja\\\\.gemini\\\\antigravity\\\\scratch\\\\FairDeal\\\\frontend\\\\src\\\\pages\\\\JobDetail.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst JobDetail = ({\n  wallet,\n  userRole\n}) => {\n  _s();\n  const {\n    jobId\n  } = useParams();\n  const navigate = useNavigate();\n  const [job, setJob] = useState(null);\n  const [jobStatus, setJobStatus] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [approving, setApproving] = useState(false);\n  const [rejecting, setRejecting] = useState(false);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    loadJobDetails();\n  }, [jobId]);\n  const loadJobDetails = async () => {\n    try {\n      // Fetch real job data from backend\n      const response = await axios.get(`http://localhost:5000/api/jobs/${jobId}`);\n      if (response.data.success) {\n        setJob(response.data.job);\n        console.log(\"Loaded job:\", response.data.job);\n        console.log(\"Job State:\", response.data.job.state, typeof response.data.job.state);\n      } else {\n        setError(\"Job not found\");\n        setJob(null);\n      }\n\n      // Load submission status from backend\n      try {\n        const statusResponse = await axios.get(`http://localhost:5000/api/jobs/${jobId}/preview`);\n        setJobStatus(statusResponse.data);\n      } catch (err) {\n        // Not submitted yet\n        setJobStatus(null);\n      }\n    } catch (err) {\n      console.error(\"Error loading job:\", err);\n      setError(\"Failed to load job details\");\n      setJob(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getStateLabel = state => {\n    if (job !== null && job !== void 0 && job.fraudFlagRaised) return \"‚õî Terminated (Fraud Flag)\";\n    const labels = {\n      0: \"Created\",\n      1: \"Submitted\",\n      2: \"Approved\",\n      3: \"Rejected\",\n      4: \"Revision Requested\"\n    };\n    return labels[state] || \"Unknown\";\n  };\n  const getStatusClass = state => {\n    const states = {\n      0: \"status-created\",\n      1: \"status-submitted\",\n      2: \"status-approved\",\n      3: \"status-rejected\",\n      4: \"status-warning\" // Use warning color for revision\n    };\n    return states[state] || \"status-created\";\n  };\n  const handleApprove = async () => {\n    setApproving(true);\n    try {\n      const response = await axios.post(`http://localhost:5000/api/jobs/${jobId}/approve`);\n      alert(`Job approved! Original file CID: ${response.data.originalCID}`);\n      alert(`Decryption Key: ${response.data.decryptionKey}`);\n\n      // Reload job status\n      loadJobDetails();\n    } catch (err) {\n      setError(\"Failed to approve job: \" + err.message);\n    } finally {\n      setApproving(false);\n    }\n  };\n  const handleReject = async () => {\n    if (window.confirm(\"Request revision from freelancer? Funds will remain in escrow.\")) {\n      setRejecting(true);\n      try {\n        // Default reject (type: request_changes)\n        await axios.post(`http://localhost:5000/api/jobs/${jobId}/reject`, {\n          type: 'request_changes'\n        });\n        alert(\"Revision requested. Freelancer has been notified to resubmit.\");\n        loadJobDetails();\n      } catch (err) {\n        setError(\"Failed to request revision: \" + err.message);\n      } finally {\n        setRejecting(false);\n      }\n    }\n  };\n  const handleRaiseFraudFlag = async () => {\n    if (window.confirm(\"üö® Are you sure you want to RAISE A FRAUD FLAG? This will strictly terminate the contract and refund 90% of funds to you immediately.\")) {\n      setRejecting(true);\n      try {\n        await axios.post(`http://localhost:5000/api/jobs/${jobId}/raise-fraud-flag`, {\n          clientAddress: wallet\n        });\n        alert(\"Fraud flag raised. Contract terminated and funds refunded.\");\n        loadJobDetails();\n      } catch (err) {\n        setError(\"Failed to raise fraud flag: \" + err.message);\n      } finally {\n        setRejecting(false);\n      }\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Loading job details...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 23\n  }, this);\n  if (!job) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error-message\",\n    children: \"Job not found\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 20\n  }, this);\n  const isClient = wallet === job.client || userRole === \"client\";\n  const isFreelancer = wallet === job.freelancer || userRole === \"freelancer\";\n\n  // Effective state: If we have preview data (jobStatus), treat state as 1 (Submitted) \n  // unless it's already higher (Approved/Rejected)\n  // Effective state priority:\n  // 1. Fraud Flag -> 3 (Terminated)\n  // 2. State 0 + Submission -> 1 (Submitted)\n  // 3. Otherwise -> Actual State\n  const effectiveState = job.fraudFlagRaised ? 3 : job.state === 0 && jobStatus ? 1 : job.state;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: \"1rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: () => navigate(\"/\"),\n          style: {\n            padding: \"0.5rem 1rem\",\n            fontSize: \"0.9rem\"\n          },\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page-title\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Job Details \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                opacity: 0.5,\n                fontSize: \"1.2rem\"\n              },\n              children: [\"#\", jobId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-alert alert-error\",\n        children: [\"\\u26A0\\uFE0F \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-cols-3\",\n        style: {\n          display: \"grid\",\n          gap: \"2rem\",\n          marginBottom: \"2.5rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"1.5rem\",\n            background: \"rgba(15, 23, 42, 0.4)\",\n            borderRadius: \"12px\",\n            border: \"1px solid var(--border)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: \"0.9rem\",\n              color: \"var(--text-muted)\",\n              marginBottom: \"0.5rem\",\n              display: \"block\"\n            },\n            children: \"Escrow Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"2rem\",\n              color: \"var(--success)\",\n              fontWeight: \"800\"\n            },\n            children: [\"$\", job.amount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"1.5rem\",\n            background: \"rgba(15, 23, 42, 0.4)\",\n            borderRadius: \"12px\",\n            border: \"1px solid var(--border)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: \"0.9rem\",\n              color: \"var(--text-muted)\",\n              marginBottom: \"0.5rem\",\n              display: \"block\"\n            },\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `status-badge ${getStatusClass(job.state) || \"\"}`,\n            style: {\n              fontSize: \"1rem\",\n              padding: \"0.5rem 1rem\"\n            },\n            children: getStateLabel(job.state)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"1.5rem\",\n            background: \"rgba(15, 23, 42, 0.4)\",\n            borderRadius: \"12px\",\n            border: \"1px solid var(--border)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontSize: \"0.9rem\",\n              color: \"var(--text-muted)\",\n              marginBottom: \"0.5rem\",\n              display: \"block\"\n            },\n            children: \"Deadline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: \"1.2rem\",\n              fontWeight: \"600\"\n            },\n            children: [\"\\u23F0 \", new Date(job.deadline).toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"2.5rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: \"1rem\",\n            color: \"var(--text-main)\"\n          },\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"1.5rem\",\n            background: \"rgba(15, 23, 42, 0.4)\",\n            borderRadius: \"12px\",\n            lineHeight: \"1.8\",\n            color: \"var(--text-main)\"\n          },\n          children: job.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"1fr 1fr\",\n          gap: \"2rem\",\n          fontSize: \"0.9rem\",\n          color: \"var(--text-muted)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Client Wallet:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontFamily: \"monospace\",\n              marginTop: \"0.5rem\",\n              background: \"rgba(0,0,0,0.2)\",\n              padding: \"0.5rem\",\n              borderRadius: \"6px\"\n            },\n            children: job.client\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Freelancer Wallet:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontFamily: \"monospace\",\n              marginTop: \"0.5rem\",\n              background: \"rgba(0,0,0,0.2)\",\n              padding: \"0.5rem\",\n              borderRadius: \"6px\"\n            },\n            children: job.freelancer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), job.fraudFlagRaised && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-alert alert-error\",\n        style: {\n          marginTop: \"1.5rem\"\n        },\n        children: [\"\\uD83D\\uDEA8 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Fraud Flag Raised\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 16\n        }, this), \" - Client has reported fraudulent behavior on this job.\", /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"0.5rem\",\n            fontSize: \"0.9rem\"\n          },\n          children: [\"Flagged on: \", new Date(job.fraudFlagTimestamp).toLocaleString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this), job.initialPaymentPercent && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"1.5rem\",\n          padding: \"1rem\",\n          background: \"rgba(15, 23, 42, 0.4)\",\n          borderRadius: \"12px\",\n          border: \"1px solid var(--border)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            marginBottom: \"0.75rem\",\n            fontSize: \"1rem\"\n          },\n          children: \"Payment Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"repeat(3, 1fr)\",\n            gap: \"1rem\",\n            fontSize: \"0.9rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"var(--text-muted)\"\n              },\n              children: [\"Initial Payment (\", job.initialPaymentPercent, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: \"bold\",\n                color: job.initialPaymentReleased ? \"var(--success)\" : \"var(--text-muted)\"\n              },\n              children: [\"$\", (job.amount * job.initialPaymentPercent / 100).toFixed(2), job.initialPaymentReleased && \" ‚úì\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"var(--text-muted)\"\n              },\n              children: [\"Remaining (\", 100 - job.initialPaymentPercent, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: \"bold\"\n              },\n              children: [\"$\", (job.amount * (100 - job.initialPaymentPercent) / 100).toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"var(--text-muted)\"\n              },\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: \"bold\",\n                fontSize: \"1.1rem\"\n              },\n              children: [\"$\", job.amount]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), isClient && job.state === 0 && job.initialPaymentReleased && !job.fraudFlagRaised && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      style: {\n        marginTop: \"2rem\",\n        border: \"1px solid var(--warning)\",\n        background: \"rgba(251, 191, 36, 0.05)\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: \"1rem\",\n          color: \"var(--warning)\"\n        },\n        children: \"\\u26A0\\uFE0F Freelancer Not Responding?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"var(--text-muted)\",\n          marginBottom: \"1.5rem\"\n        },\n        children: \"If the freelancer has received the initial payment but hasn't submitted any work, you can raise a fraud flag. This will be permanently recorded on the blockchain and visible on their profile.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: handleRaiseFraudFlag,\n        disabled: rejecting,\n        children: rejecting ? \"Raising Flag...\" : \"üö® Raise Fraud Flag\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this), isClient && jobStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      style: {\n        marginTop: \"2rem\",\n        borderTop: \"4px solid var(--primary)\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: \"1.5rem\"\n        },\n        children: \"\\uD83D\\uDCC1 Work Submission Review\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-alert alert-info\",\n        children: \"Freelancer has submitted work. Review the preview below before approving payment.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"2rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: \"bold\",\n            display: \"block\",\n            marginBottom: \"0.5rem\"\n          },\n          children: \"Watermarked Preview:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: \"1rem\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: jobStatus.previewURL,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"btn btn-primary\",\n            children: \"\\uD83D\\uDC40 View Preview File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"0.9rem\",\n              color: \"var(--text-muted)\"\n            },\n            children: [\"Submitted: \", jobStatus.submittedAt]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: \"1.5rem\",\n          paddingTop: \"1.5rem\",\n          borderTop: \"1px solid var(--border)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'none'\n          },\n          children: [\"state: \", job.state, \", effective: \", effectiveState]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 15\n        }, this), effectiveState === 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-alert alert-error\",\n          style: {\n            width: '100%',\n            textAlign: 'center',\n            fontWeight: 'bold'\n          },\n          children: \"\\uD83D\\uDEAB Contract Terminated & Refunded (Fraud Flag). No further actions allowed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success\",\n            onClick: handleApprove,\n            disabled: approving || effectiveState !== 1,\n            style: {\n              flex: 1,\n              opacity: effectiveState !== 1 ? 0.5 : 1,\n              cursor: effectiveState !== 1 ? 'not-allowed' : 'pointer'\n            },\n            children: approving ? \"Releasing Funds...\" : \"‚úÖ Approve & Pay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-warning\",\n              onClick: handleReject,\n              disabled: rejecting || effectiveState !== 1,\n              style: {\n                width: '100%',\n                opacity: effectiveState !== 1 ? 0.5 : 1,\n                cursor: effectiveState !== 1 ? 'not-allowed' : 'pointer',\n                background: '#f59e0b',\n                color: 'white'\n              },\n              children: rejecting ? \"Processing...\" : \"‚Ü©Ô∏è Request Revision\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 21\n            }, this), effectiveState === 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleRaiseFraudFlag,\n              style: {\n                background: 'transparent',\n                border: 'none',\n                color: '#ef4444',\n                fontSize: '0.8rem',\n                cursor: 'pointer',\n                textDecoration: 'underline'\n              },\n              children: \"End Contract & Raise Flag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }, this), isFreelancer && (effectiveState === 0 || effectiveState === 4) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      style: {\n        marginTop: \"2rem\",\n        textAlign: \"center\",\n        padding: \"3rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginBottom: \"1rem\"\n        },\n        children: effectiveState === 4 ? \"‚Ü©Ô∏è Revision Requested\" : \"Ready to submit?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"var(--text-muted)\",\n          marginBottom: \"2rem\"\n        },\n        children: effectiveState === 4 ? \"The client successfully requested changes. Please upload a new version.\" : \"Upload your work to the secure vault to start the review process.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(`/job/${jobId}/submit`),\n        style: {\n          padding: \"1rem 2rem\",\n          fontSize: \"1.1rem\"\n        },\n        children: [\"\\uD83D\\uDCE4 \", effectiveState === 4 ? \"Upload Revised Work\" : \"Upload Work File\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 11\n    }, this), isFreelancer && effectiveState === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      style: {\n        marginTop: \"2rem\",\n        border: \"1px solid var(--warning)\",\n        background: \"rgba(251, 191, 36, 0.05)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: \"1rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"2rem\"\n          },\n          children: \"\\u23F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              color: \"var(--warning)\"\n            },\n            children: \"Waiting for Client Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: \"var(--text-muted)\"\n            },\n            children: \"Your work has been submitted. The client will review the preview and release funds shortly.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 11\n    }, this), effectiveState === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      style: {\n        marginTop: \"2rem\",\n        border: \"1px solid var(--success)\",\n        background: \"rgba(74, 222, 128, 0.05)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: \"1rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"2rem\"\n          },\n          children: \"\\u2705\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              color: \"var(--success)\"\n            },\n            children: \"Job Approved\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: \"var(--text-muted)\"\n            },\n            children: \"Funds have been released! Transaction complete.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 17\n          }, this), (isClient || isFreelancer) && job.fileDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: \"1rem\",\n              paddingTop: \"1rem\",\n              borderTop: \"1px solid var(--border)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                marginBottom: \"0.5rem\"\n              },\n              children: \"\\uD83D\\uDD13 Access Source Files\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-alert alert-info\",\n              style: {\n                marginBottom: \"1rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Original File (Encrypted):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  wordBreak: \"break-all\",\n                  marginTop: \"0.25rem\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: `https://w3s.link/ipfs/${job.fileDetails.originalCID}`,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  style: {\n                    color: \"var(--primary)\"\n                  },\n                  children: job.fileDetails.originalCID\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr\",\n                gap: \"1rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Decryption Key:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n                  style: {\n                    display: \"block\",\n                    background: \"rgba(0,0,0,0.3)\",\n                    padding: \"0.5rem\",\n                    borderRadius: \"4px\",\n                    fontSize: \"0.8rem\",\n                    wordBreak: \"break-all\",\n                    marginTop: \"0.25rem\"\n                  },\n                  children: job.fileDetails.encryptionKey\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"IV:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n                  style: {\n                    display: \"block\",\n                    background: \"rgba(0,0,0,0.3)\",\n                    padding: \"0.5rem\",\n                    borderRadius: \"4px\",\n                    fontSize: \"0.8rem\",\n                    wordBreak: \"break-all\",\n                    marginTop: \"0.25rem\"\n                  },\n                  children: job.fileDetails.encryptionIV\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 21\n            }, this), job.fileDetails.isCodeFolder ? /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: \"0.8rem\",\n                marginTop: \"0.5rem\",\n                color: \"var(--text-muted)\"\n              },\n              children: \"Download the ZIP file and assume encryption is handled (MVP simulation).\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 25\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: \"0.8rem\",\n                marginTop: \"0.5rem\",\n                color: \"var(--text-muted)\"\n              },\n              children: \"Download the file and use the key/IV to decrypt (AES-256-CBC).\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 11\n    }, this), effectiveState === 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card\",\n      style: {\n        marginTop: \"2rem\",\n        border: \"1px solid var(--error)\",\n        background: \"rgba(248, 113, 113, 0.05)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: \"1rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"2rem\"\n          },\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              color: \"var(--error)\"\n            },\n            children: \"Job Rejected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: \"var(--text-muted)\"\n            },\n            children: \"The work was rejected and funds have been returned to the client.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n};\n_s(JobDetail, \"b17mh/yq1dftjGd/U2Rla0rf1CM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = JobDetail;\nexport default JobDetail;\nvar _c;\n$RefreshReg$(_c, \"JobDetail\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","JobDetail","wallet","userRole","_s","jobId","navigate","job","setJob","jobStatus","setJobStatus","loading","setLoading","approving","setApproving","rejecting","setRejecting","error","setError","loadJobDetails","response","get","data","success","console","log","state","statusResponse","err","getStateLabel","fraudFlagRaised","labels","getStatusClass","states","handleApprove","post","alert","originalCID","decryptionKey","message","handleReject","window","confirm","type","handleRaiseFraudFlag","clientAddress","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isClient","client","isFreelancer","freelancer","effectiveState","style","display","alignItems","gap","onClick","padding","fontSize","opacity","marginBottom","background","borderRadius","border","color","fontWeight","amount","Date","deadline","toLocaleDateString","lineHeight","description","gridTemplateColumns","fontFamily","marginTop","fraudFlagTimestamp","toLocaleString","initialPaymentPercent","initialPaymentReleased","toFixed","disabled","borderTop","href","previewURL","target","rel","submittedAt","paddingTop","width","textAlign","flex","cursor","flexDirection","textDecoration","fileDetails","wordBreak","encryptionKey","encryptionIV","isCodeFolder","_c","$RefreshReg$"],"sources":["C:/Users/debja/.gemini/antigravity/scratch/FairDeal/frontend/src/pages/JobDetail.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\ninterface JobDetailProps {\r\n  wallet: string | null;\r\n  userRole: string | null;\r\n}\r\n\r\nconst JobDetail: React.FC<JobDetailProps> = ({ wallet, userRole }) => {\r\n  const { jobId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [job, setJob] = useState<any>(null);\r\n  const [jobStatus, setJobStatus] = useState<any>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [approving, setApproving] = useState<boolean>(false);\r\n  const [rejecting, setRejecting] = useState<boolean>(false);\r\n\r\n  const [error, setError] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    loadJobDetails();\r\n  }, [jobId]);\r\n\r\n  const loadJobDetails = async () => {\r\n    try {\r\n      // Fetch real job data from backend\r\n      const response = await axios.get(`http://localhost:5000/api/jobs/${jobId}`);\r\n\r\n      if (response.data.success) {\r\n        setJob(response.data.job);\r\n        console.log(\"Loaded job:\", response.data.job);\r\n        console.log(\"Job State:\", response.data.job.state, typeof response.data.job.state);\r\n      } else {\r\n        setError(\"Job not found\");\r\n        setJob(null);\r\n      }\r\n\r\n      // Load submission status from backend\r\n      try {\r\n        const statusResponse = await axios.get(`http://localhost:5000/api/jobs/${jobId}/preview`);\r\n        setJobStatus(statusResponse.data);\r\n      } catch (err) {\r\n        // Not submitted yet\r\n        setJobStatus(null);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error loading job:\", err);\r\n      setError(\"Failed to load job details\");\r\n      setJob(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStateLabel = (state: number) => {\r\n    if (job?.fraudFlagRaised) return \"‚õî Terminated (Fraud Flag)\";\r\n\r\n    const labels: { [key: number]: string } = {\r\n      0: \"Created\",\r\n      1: \"Submitted\",\r\n      2: \"Approved\",\r\n      3: \"Rejected\",\r\n      4: \"Revision Requested\",\r\n    };\r\n    return labels[state] || \"Unknown\";\r\n  };\r\n\r\n  const getStatusClass = (state: number) => {\r\n    const states: { [key: number]: string } = {\r\n      0: \"status-created\",\r\n      1: \"status-submitted\",\r\n      2: \"status-approved\",\r\n      3: \"status-rejected\",\r\n      4: \"status-warning\", // Use warning color for revision\r\n    };\r\n    return states[state] || \"status-created\";\r\n  };\r\n\r\n  const handleApprove = async () => {\r\n    setApproving(true);\r\n    try {\r\n      const response = await axios.post(`http://localhost:5000/api/jobs/${jobId}/approve`);\r\n\r\n      alert(`Job approved! Original file CID: ${response.data.originalCID}`);\r\n      alert(`Decryption Key: ${response.data.decryptionKey}`);\r\n\r\n      // Reload job status\r\n      loadJobDetails();\r\n    } catch (err: any) {\r\n      setError(\"Failed to approve job: \" + err.message);\r\n    } finally {\r\n      setApproving(false);\r\n    }\r\n  };\r\n\r\n  const handleReject = async () => {\r\n    if (window.confirm(\"Request revision from freelancer? Funds will remain in escrow.\")) {\r\n      setRejecting(true);\r\n      try {\r\n        // Default reject (type: request_changes)\r\n        await axios.post(`http://localhost:5000/api/jobs/${jobId}/reject`, { type: 'request_changes' });\r\n        alert(\"Revision requested. Freelancer has been notified to resubmit.\");\r\n        loadJobDetails();\r\n      } catch (err: any) {\r\n        setError(\"Failed to request revision: \" + err.message);\r\n      } finally {\r\n        setRejecting(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRaiseFraudFlag = async () => {\r\n    if (window.confirm(\"üö® Are you sure you want to RAISE A FRAUD FLAG? This will strictly terminate the contract and refund 90% of funds to you immediately.\")) {\r\n      setRejecting(true);\r\n      try {\r\n        await axios.post(`http://localhost:5000/api/jobs/${jobId}/raise-fraud-flag`, { clientAddress: wallet });\r\n        alert(\"Fraud flag raised. Contract terminated and funds refunded.\");\r\n        loadJobDetails();\r\n      } catch (err: any) {\r\n        setError(\"Failed to raise fraud flag: \" + err.message);\r\n      } finally {\r\n        setRejecting(false);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n\r\n  if (loading) return <div className=\"loading\">Loading job details...</div>;\r\n  if (!job) return <div className=\"error-message\">Job not found</div>;\r\n\r\n  const isClient = wallet === job.client || userRole === \"client\";\r\n  const isFreelancer = wallet === job.freelancer || userRole === \"freelancer\";\r\n\r\n  // Effective state: If we have preview data (jobStatus), treat state as 1 (Submitted) \r\n  // unless it's already higher (Approved/Rejected)\r\n  // Effective state priority:\r\n  // 1. Fraud Flag -> 3 (Terminated)\r\n  // 2. State 0 + Submission -> 1 (Submitted)\r\n  // 3. Otherwise -> Actual State\r\n  const effectiveState = job.fraudFlagRaised ? 3 : ((job.state === 0 && jobStatus) ? 1 : job.state);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"page-header\">\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\r\n          <button\r\n            className=\"btn btn-secondary\"\r\n            onClick={() => navigate(\"/\")}\r\n            style={{ padding: \"0.5rem 1rem\", fontSize: \"0.9rem\" }}\r\n          >\r\n            ‚Üê Back\r\n          </button>\r\n          <div className=\"page-title\">\r\n            <h1>Job Details <span style={{ opacity: 0.5, fontSize: \"1.2rem\" }}>#{jobId}</span></h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"glass-card\">\r\n        {error && <div className=\"message-alert alert-error\">‚ö†Ô∏è {error}</div>}\r\n\r\n        <div className=\"grid-cols-3\" style={{ display: \"grid\", gap: \"2rem\", marginBottom: \"2.5rem\" }}>\r\n          <div style={{ padding: \"1.5rem\", background: \"rgba(15, 23, 42, 0.4)\", borderRadius: \"12px\", border: \"1px solid var(--border)\" }}>\r\n            <label style={{ fontSize: \"0.9rem\", color: \"var(--text-muted)\", marginBottom: \"0.5rem\", display: \"block\" }}>Escrow Amount</label>\r\n            <div style={{ fontSize: \"2rem\", color: \"var(--success)\", fontWeight: \"800\" }}>\r\n              ${job.amount}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ padding: \"1.5rem\", background: \"rgba(15, 23, 42, 0.4)\", borderRadius: \"12px\", border: \"1px solid var(--border)\" }}>\r\n            <label style={{ fontSize: \"0.9rem\", color: \"var(--text-muted)\", marginBottom: \"0.5rem\", display: \"block\" }}>Status</label>\r\n            <div className={`status-badge ${getStatusClass(job.state) || \"\"}`} style={{ fontSize: \"1rem\", padding: \"0.5rem 1rem\" }}>\r\n              {getStateLabel(job.state)}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ padding: \"1.5rem\", background: \"rgba(15, 23, 42, 0.4)\", borderRadius: \"12px\", border: \"1px solid var(--border)\" }}>\r\n            <label style={{ fontSize: \"0.9rem\", color: \"var(--text-muted)\", marginBottom: \"0.5rem\", display: \"block\" }}>Deadline</label>\r\n            <div style={{ fontSize: \"1.2rem\", fontWeight: \"600\" }}>\r\n              ‚è∞ {new Date(job.deadline).toLocaleDateString()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginBottom: \"2.5rem\" }}>\r\n          <h3 style={{ marginBottom: \"1rem\", color: \"var(--text-main)\" }}>Description</h3>\r\n          <div style={{ padding: \"1.5rem\", background: \"rgba(15, 23, 42, 0.4)\", borderRadius: \"12px\", lineHeight: \"1.8\", color: \"var(--text-main)\" }}>\r\n            {job.description}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: \"2rem\", fontSize: \"0.9rem\", color: \"var(--text-muted)\" }}>\r\n          <div>\r\n            <strong>Client Wallet:</strong>\r\n            <div style={{ fontFamily: \"monospace\", marginTop: \"0.5rem\", background: \"rgba(0,0,0,0.2)\", padding: \"0.5rem\", borderRadius: \"6px\" }}>\r\n              {job.client}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <strong>Freelancer Wallet:</strong>\r\n            <div style={{ fontFamily: \"monospace\", marginTop: \"0.5rem\", background: \"rgba(0,0,0,0.2)\", padding: \"0.5rem\", borderRadius: \"6px\" }}>\r\n              {job.freelancer}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Fraud Flag Warning */}\r\n        {job.fraudFlagRaised && (\r\n          <div className=\"message-alert alert-error\" style={{ marginTop: \"1.5rem\" }}>\r\n            üö® <strong>Fraud Flag Raised</strong> - Client has reported fraudulent behavior on this job.\r\n            <div style={{ marginTop: \"0.5rem\", fontSize: \"0.9rem\" }}>\r\n              Flagged on: {new Date(job.fraudFlagTimestamp).toLocaleString()}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Payment Breakdown */}\r\n        {job.initialPaymentPercent && (\r\n          <div style={{ marginTop: \"1.5rem\", padding: \"1rem\", background: \"rgba(15, 23, 42, 0.4)\", borderRadius: \"12px\", border: \"1px solid var(--border)\" }}>\r\n            <h4 style={{ marginBottom: \"0.75rem\", fontSize: \"1rem\" }}>Payment Breakdown</h4>\r\n            <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(3, 1fr)\", gap: \"1rem\", fontSize: \"0.9rem\" }}>\r\n              <div>\r\n                <div style={{ color: \"var(--text-muted)\" }}>Initial Payment ({job.initialPaymentPercent}%)</div>\r\n                <div style={{ fontWeight: \"bold\", color: job.initialPaymentReleased ? \"var(--success)\" : \"var(--text-muted)\" }}>\r\n                  ${(job.amount * job.initialPaymentPercent / 100).toFixed(2)}\r\n                  {job.initialPaymentReleased && \" ‚úì\"}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div style={{ color: \"var(--text-muted)\" }}>Remaining ({100 - job.initialPaymentPercent}%)</div>\r\n                <div style={{ fontWeight: \"bold\" }}>\r\n                  ${(job.amount * (100 - job.initialPaymentPercent) / 100).toFixed(2)}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div style={{ color: \"var(--text-muted)\" }}>Total</div>\r\n                <div style={{ fontWeight: \"bold\", fontSize: \"1.1rem\" }}>${job.amount}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Fraud Flag Option (for Client) */}\r\n      {isClient && job.state === 0 && job.initialPaymentReleased && !job.fraudFlagRaised && (\r\n        <div className=\"glass-card\" style={{ marginTop: \"2rem\", border: \"1px solid var(--warning)\", background: \"rgba(251, 191, 36, 0.05)\" }}>\r\n          <h3 style={{ marginBottom: \"1rem\", color: \"var(--warning)\" }}>‚ö†Ô∏è Freelancer Not Responding?</h3>\r\n          <p style={{ color: \"var(--text-muted)\", marginBottom: \"1.5rem\" }}>\r\n            If the freelancer has received the initial payment but hasn't submitted any work, you can raise a fraud flag.\r\n            This will be permanently recorded on the blockchain and visible on their profile.\r\n          </p>\r\n          <button\r\n            className=\"btn btn-danger\"\r\n            onClick={handleRaiseFraudFlag}\r\n            disabled={rejecting}\r\n          >\r\n            {rejecting ? \"Raising Flag...\" : \"üö® Raise Fraud Flag\"}\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Submission Preview (for Client) */}\r\n      {\r\n        isClient && jobStatus && (\r\n          <div className=\"glass-card\" style={{ marginTop: \"2rem\", borderTop: \"4px solid var(--primary)\" }}>\r\n            <h3 style={{ marginBottom: \"1.5rem\" }}>üìÅ Work Submission Review</h3>\r\n\r\n            <div className=\"message-alert alert-info\">\r\n              Freelancer has submitted work. Review the preview below before approving payment.\r\n            </div>\r\n\r\n            <div style={{ marginBottom: \"2rem\" }}>\r\n              <label style={{ fontWeight: \"bold\", display: \"block\", marginBottom: \"0.5rem\" }}>Watermarked Preview:</label>\r\n              <div style={{ display: \"flex\", gap: \"1rem\", alignItems: \"center\" }}>\r\n                <a\r\n                  href={jobStatus.previewURL}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"btn btn-primary\"\r\n                >\r\n                  üëÄ View Preview File\r\n                </a>\r\n                <span style={{ fontSize: \"0.9rem\", color: \"var(--text-muted)\" }}>\r\n                  Submitted: {jobStatus.submittedAt}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ display: \"flex\", gap: \"1.5rem\", paddingTop: \"1.5rem\", borderTop: \"1px solid var(--border)\" }}>\r\n              {/* Debug info - remove later */}\r\n              <div style={{ display: 'none' }}>state: {job.state}, effective: {effectiveState}</div>\r\n\r\n              {effectiveState === 3 ? (\r\n                <div className=\"message-alert alert-error\" style={{ width: '100%', textAlign: 'center', fontWeight: 'bold' }}>\r\n                  üö´ Contract Terminated & Refunded (Fraud Flag). No further actions allowed.\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <button\r\n                    className=\"btn btn-success\"\r\n                    onClick={handleApprove}\r\n                    disabled={approving || effectiveState !== 1}\r\n                    style={{ flex: 1, opacity: effectiveState !== 1 ? 0.5 : 1, cursor: effectiveState !== 1 ? 'not-allowed' : 'pointer' }}\r\n                  >\r\n                    {approving ? \"Releasing Funds...\" : \"‚úÖ Approve & Pay\"}\r\n                  </button>\r\n\r\n                  <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\r\n                    <button\r\n                      className=\"btn btn-warning\"\r\n                      onClick={handleReject}\r\n                      disabled={rejecting || effectiveState !== 1}\r\n                      style={{ width: '100%', opacity: effectiveState !== 1 ? 0.5 : 1, cursor: effectiveState !== 1 ? 'not-allowed' : 'pointer', background: '#f59e0b', color: 'white' }}\r\n                    >\r\n                      {rejecting ? \"Processing...\" : \"‚Ü©Ô∏è Request Revision\"}\r\n                    </button>\r\n\r\n                    {effectiveState === 1 && (\r\n                      <button\r\n                        onClick={handleRaiseFraudFlag}\r\n                        style={{ background: 'transparent', border: 'none', color: '#ef4444', fontSize: '0.8rem', cursor: 'pointer', textDecoration: 'underline' }}\r\n                      >\r\n                        End Contract & Raise Flag\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {/* Submit Work (for Freelancer) */}\r\n      {\r\n        isFreelancer && (effectiveState === 0 || effectiveState === 4) && (\r\n          <div className=\"glass-card\" style={{ marginTop: \"2rem\", textAlign: \"center\", padding: \"3rem\" }}>\r\n            <h3 style={{ marginBottom: \"1rem\" }}>\r\n              {effectiveState === 4 ? \"‚Ü©Ô∏è Revision Requested\" : \"Ready to submit?\"}\r\n            </h3>\r\n            <p style={{ color: \"var(--text-muted)\", marginBottom: \"2rem\" }}>\r\n              {effectiveState === 4\r\n                ? \"The client successfully requested changes. Please upload a new version.\"\r\n                : \"Upload your work to the secure vault to start the review process.\"}\r\n            </p>\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              onClick={() => navigate(`/job/${jobId}/submit`)}\r\n              style={{ padding: \"1rem 2rem\", fontSize: \"1.1rem\" }}\r\n            >\r\n              üì§ {effectiveState === 4 ? \"Upload Revised Work\" : \"Upload Work File\"}\r\n            </button>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {/* Work Submitted (for Freelancer) */}\r\n      {\r\n        isFreelancer && effectiveState === 1 && (\r\n          <div className=\"glass-card\" style={{ marginTop: \"2rem\", border: \"1px solid var(--warning)\", background: \"rgba(251, 191, 36, 0.05)\" }}>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\r\n              <div style={{ fontSize: \"2rem\" }}>‚è≥</div>\r\n              <div>\r\n                <h3 style={{ color: \"var(--warning)\" }}>Waiting for Client Review</h3>\r\n                <p style={{ color: \"var(--text-muted)\" }}>\r\n                  Your work has been submitted. The client will review the preview and release funds shortly.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {/* Approved */}\r\n      {\r\n        effectiveState === 2 && (\r\n          <div className=\"glass-card\" style={{ marginTop: \"2rem\", border: \"1px solid var(--success)\", background: \"rgba(74, 222, 128, 0.05)\" }}>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\r\n              <div style={{ fontSize: \"2rem\" }}>‚úÖ</div>\r\n              <div>\r\n                <h3 style={{ color: \"var(--success)\" }}>Job Approved</h3>\r\n                <p style={{ color: \"var(--text-muted)\" }}>\r\n                  Funds have been released! Transaction complete.\r\n                </p>\r\n\r\n                {/* Show File Download for Client/Freelancer if available */}\r\n                {(isClient || isFreelancer) && job.fileDetails && (\r\n                  <div style={{ marginTop: \"1rem\", paddingTop: \"1rem\", borderTop: \"1px solid var(--border)\" }}>\r\n                    <h4 style={{ marginBottom: \"0.5rem\" }}>üîì Access Source Files</h4>\r\n\r\n                    <div className=\"message-alert alert-info\" style={{ marginBottom: \"1rem\" }}>\r\n                      <strong>Original File (Encrypted):</strong>\r\n                      <div style={{ wordBreak: \"break-all\", marginTop: \"0.25rem\" }}>\r\n                        <a href={`https://w3s.link/ipfs/${job.fileDetails.originalCID}`} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: \"var(--primary)\" }}>\r\n                          {job.fileDetails.originalCID}\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: \"1rem\" }}>\r\n                      <div>\r\n                        <strong>Decryption Key:</strong>\r\n                        <code style={{ display: \"block\", background: \"rgba(0,0,0,0.3)\", padding: \"0.5rem\", borderRadius: \"4px\", fontSize: \"0.8rem\", wordBreak: \"break-all\", marginTop: \"0.25rem\" }}>\r\n                          {job.fileDetails.encryptionKey}\r\n                        </code>\r\n                      </div>\r\n                      <div>\r\n                        <strong>IV:</strong>\r\n                        <code style={{ display: \"block\", background: \"rgba(0,0,0,0.3)\", padding: \"0.5rem\", borderRadius: \"4px\", fontSize: \"0.8rem\", wordBreak: \"break-all\", marginTop: \"0.25rem\" }}>\r\n                          {job.fileDetails.encryptionIV}\r\n                        </code>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {job.fileDetails.isCodeFolder\r\n                      ? <p style={{ fontSize: \"0.8rem\", marginTop: \"0.5rem\", color: \"var(--text-muted)\" }}>Download the ZIP file and assume encryption is handled (MVP simulation).</p>\r\n                      : <p style={{ fontSize: \"0.8rem\", marginTop: \"0.5rem\", color: \"var(--text-muted)\" }}>Download the file and use the key/IV to decrypt (AES-256-CBC).</p>\r\n                    }\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      {/* Rejected */}\r\n      {\r\n        effectiveState === 3 && (\r\n          <div className=\"glass-card\" style={{ marginTop: \"2rem\", border: \"1px solid var(--error)\", background: \"rgba(248, 113, 113, 0.05)\" }}>\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\r\n              <div style={{ fontSize: \"2rem\" }}>‚ùå</div>\r\n              <div>\r\n                <h3 style={{ color: \"var(--error)\" }}>Job Rejected</h3>\r\n                <p style={{ color: \"var(--text-muted)\" }}>\r\n                  The work was rejected and funds have been returned to the client.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default JobDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}